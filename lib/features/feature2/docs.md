В Dart библиотека (library) представляет собой модуль, который позволяет организовывать код и скрывать детали реализации от других частей приложения. Библиотеки помогают структурировать код и контролировать доступ к определённым классам, методам и переменным.

### Пример использования библиотек с директивами `library`, `part`, и `part of`

Предположим, у нас есть проект, где мы хотим организовать код так, чтобы часть его была доступна только внутри определённой библиотеки, а не могла быть импортирована напрямую.

#### 1. Основной файл библиотеки

Создадим файл, который будет выступать в качестве основного файла библиотеки.

```dart
// file: lib/my_library.dart
library my_library;

// Указываем, что этот файл включает в себя части (parts) из других файлов
part 'src/my_internal_file.dart';
part 'src/another_internal_file.dart';

// Публичный класс, доступный за пределами библиотеки
class MyPublicClass {
  void doSomething() {
    print('Doing something in public class...');
  }
}
```

#### 2. Внутренние файлы библиотеки

Эти файлы будут частью нашей библиотеки, но они не могут быть импортированы напрямую из других частей приложения.

```dart
// file: lib/src/my_internal_file.dart
part of 'package:my_project/my_library.dart';

// Приватный класс, доступный только внутри библиотеки
class _MyInternalClass {
  void _internalMethod() {
    print('This is an internal method.');
  }
}
```

```dart
// file: lib/src/another_internal_file.dart
part of 'package:my_project/my_library.dart';

// Другой приватный класс, доступный только внутри библиотеки
class _AnotherInternalClass {
  void _anotherInternalMethod() {
    print('This is another internal method.');
  }
}
```

#### 3. Использование библиотеки в приложении

Теперь, когда мы хотим использовать нашу библиотеку, мы можем импортировать основной файл `my_library.dart`, и у нас будет доступ только к публичным частям библиотеки.

```dart
// file: lib/main.dart
import 'package:my_project/my_library.dart';

void main() {
  // Мы можем использовать MyPublicClass, потому что он публичный.
  var publicClass = MyPublicClass();
  publicClass.doSomething();

  // Мы не можем напрямую использовать _MyInternalClass или _AnotherInternalClass,
  // потому что они приватные и находятся внутри библиотеки.
  // var internalClass = _MyInternalClass(); // Ошибка: класс недоступен
}
```

### Как это работает

- **`library`**: Директива `library` объявляет начало библиотеки. Это позволяет организовать связанные файлы вместе как одну логическую единицу.
- **`part`**: Директива `part` используется в основном файле библиотеки для включения других файлов как части этой библиотеки.
- **`part of`**: Включаемые файлы используют директиву `part of`, чтобы указать, какой библиотеке они принадлежат.

### Преимущества использования библиотек

1. **Инкапсуляция**: Вы можете скрыть детали реализации (например, приватные классы или методы) от других частей кода, предоставляя только публичные API.
2. **Упрощение структуры проекта**: Библиотеки помогают организовать код в модульную структуру, что делает проект более управляемым.
3. **Управление доступом**: Использование библиотек позволяет контролировать, какие части кода доступны внешним пользователям, а какие остаются скрытыми.

### Заключение

Использование библиотек в Dart помогает создать чёткую структуру проекта, улучшить инкапсуляцию и управляемость кода. Это особенно полезно в крупных проектах, где важно разграничить публичные и приватные части кода.